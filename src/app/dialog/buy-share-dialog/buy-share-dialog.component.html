<div class="mat-dialog-content">
  <div *ngIf="data.userBalance | async; let balance">
    <mat-dialog-content [formGroup]="form">
      <h1> {{ data.stockSymbol }} </h1>
      <p>Current Price: {{ data.currentSharePrice }} GBP</p>

      <p>Current Balance: {{ balance.toLocaleString() }} GBP</p>

      <mat-form-field>
        <mat-label>Volume</mat-label>
        <input type="number" min="1" matInput placeholder="1234" formControlName="volume"
          (keypress)="numberOnly($event)">

      </mat-form-field>

      Total: {{ total(data.currentSharePrice, form.get('volume').value).toLocaleString() }} GBP
      <br>
      <div>
        <button style="display: inline-block;" (click)="submitTradeRequest(data.stockSymbol, data.currentSharePrice)"
          mat-raised-button color="primary"
          [disabled]="form.pristine || form.invalid || invalidSharePrice || validate(total(data.currentSharePrice, form.get('volume').value), balance)">
          BUY </button>
          <div class="divider"></div>
          <button style="display: inline-block;" (click)="onCloseClick()" mat-raised-button color="secondary"> CLOSE </button>

        <div class="divider"></div>
        <mat-progress-spinner style="display: inline-block;" [diameter]="25" [mode]="mode" *ngIf="isLoading">
        </mat-progress-spinner>

        
      </div>
      <br>
      <div style="height: 20%;" *ngIf="successfullSubmission" class="alert alert-success">
        <strong>Your trade has been submitted</strong> 
      </div>
      <div style="height: 20%;" *ngIf="invalidSharePrice" class="alert alert-danger">
          <strong>Share price changed, please close window</strong> 
        </div>
    </mat-dialog-content>
  </div>
</div>